<% layout('layout'); -%>

<% block('header_scripts', '<script src="/socket.io/socket.io.js"></script>'); -%>
<% block('header_link', '<link rel="stylesheet" href="/public/stylesheets/index.css" />'); -%>

<nav class="navbar navbar-inverse navbar-top">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand"><%= title %></span>
    </div>
  </div>
</nav>
 
<div class="container">
  <div id="main" class="row">

    <div class="col-sm-4">
      <div id="contact" class="panel panel-default">
        <div class="contact-head panel-heading"><span>検索</span></div>
        <div class="contact-body list-group">
          <% roomList.forEach(function (room) { %>
          <div class="list-group-item">
            <span class="badge">14</span>
            <%= room.room[0].room_name %>
          </div>
          <% }); %>
        </div>
      </div>
    </div>

    <div class="col-sm-8">
      <div id="dashboard" class="panel panel-default">

        <div class="panel-heading row">
          <div id="room-name" data-room="<%= roomList[0].room_id %>" class="col-xs-10">
            <%= roomList[0].room[0].room_name %>
          </div>
          <div class="col-xs-2 btn btn-default">
              追加
          </div>
        </div>

        <div class="board panel-body">
          <% dashboard.forEach(function (message) { %>
          <div class="<%= foo = (message.user_id == user.id) ? 'me' : 'you' %>">
            <% if (foo == 'you') { %>
            <div class="name"></div>
            <% } %>
            <div class="message receive well"><span><%= message.message %></span></div>
          </div>
          <% }); %>
        </div>

        <div class="panel-footer">
          <form id="messageForm" class="form-horizontal" onsubmit="return send(); return false;" data-user="<%= user.id %>">
            <div class="col-xs-10">
              <input type="text" name="message" id="message" placeholder="メッセージ" class="form-control" autofocus>
            </div>
            <div class="col-xs-2">
              <input type="submit" class="btn btn-info btn-block" onsubmit="return false;" value="送信">
            </div>
          </form>
        </div>

      </div>
    </div>
  </div>
</div>
 
<% block('footer_scripts', '<script type="text/javascript" src="/public/javascripts/chat.js"></script>'); -%>
